# Default values for the reusable Wordpress Helm chart.

wordpress:
  image: ghcr.io/fahdr/wordpress:6.8.1-php8.4-fpm
  # dbHost: wordpress-mariadb-primary
  # dbUser: wordpress
  # dbName: wordpress
  nginxConfFile: "" # Path to custom nginx.conf (optional)
  extraConfigs: []  # List of extra WP config lines (optional)
  autoUpdateCore: true
  disallowFileEdit: true
  disallowFileMods: true
  db:
    secretKeyRefName: db-secrets
    secretKeyRefKey: DB_PASSWORD

  # External Secrets integration (alternative to Helm-generated secrets)
  externalSecret:
    enabled: false  # Set to true to use External Secrets instead of Helm lookup


  # S3 uploads configuration (used if imgStore == "s3")
  imgStore:     # "s3" or "other"
    enabled: false
    url: "https://test.com"
    subpath: "test"
    # s3:
    #   bucket: ""
    #   region: ""
    #   key: ""
    #   secret: ""
    # Other image store config (used if imgStore == "other")
    other:
      config:
        #filename: "" # Used if type == "file"
        values:
          debug: true
          mu-plugin: test
          

  # Resource requests and limits for Wordpress container
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

  # Health probe configuration
  healthProbes:
    enabled: true
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 6
    readiness:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3

  # Horizontal Pod Autoscaler settings
  # NOTE: maxReplicas is set to 1 because the PVC is RWO (ReadWriteOnce).
  # To enable scaling, configure RWX storage (CephFS or NFS) first.
  hpa:
    maxReplicas: 1
    cpuUtilization: 80

# PVC for Wordpress data
  storage:
    wwwdata:
      size: 1Gi
      #storageClassName: ""  # Optional, specify if needed
  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      external-dns.alpha.kubernetes.io/target: "portkey-tunnel.themainfreak.com"
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"

nginx:
  image: nginx:1.29.5
  resources:
    requests:
      cpu: 50m
      memory: 16Mi
    limits:
      cpu: 100m
      memory: 32Mi

#Git uploads (optional)
gitUploads:
  enabled: false
  gitUrl: github.com
  gitOrg: ""
  gitRepo: ""
  gitHashOrBranch: master

# PVC name for Wordpress data
