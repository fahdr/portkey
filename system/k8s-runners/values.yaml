gha-runner-scale-set:
  # GitHub repository URL
  githubConfigUrl: "https://github.com/fahdr/portkey"

  # Reference to the secret containing GitHub App credentials
  githubConfigSecret: github-app-credentials

  # Scaling configuration
  minRunners: 0
  maxRunners: 5

  # Controller service account (must match the controller namespace)
  controllerServiceAccount:
    namespace: actions-runner-controller
    name: actions-runner-controller-gha-rs-controller

  # Use container mode with Docker-in-Docker for workflows that use containers
  # This automatically configures the dind sidecar and volumes
  containerMode:
    type: dind

  # Runner pod template - only specify resource limits
  # The dind configuration is handled by containerMode above
  template:
    spec:
      containers:
        - name: runner
          image: ghcr.io/actions/actions-runner:latest
          command: ["/home/runner/run.sh"]
          resources:
            limits:
              cpu: "2"
              memory: 4Gi
            requests:
              cpu: 500m
              memory: 1Gi
