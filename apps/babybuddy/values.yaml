app-template:
  controllers:
    babybuddy:
      containers:
        babybuddy:
          image:
            repository: lscr.io/linuxserver/babybuddy
            tag: 2.7.1@sha256:e7a6ba45c9d4bb83f4e0d8a189cc5a88bfaae61cd37fdad3fcf1a023c721e3c5

          env:
            TZ: Asia/Dubai
            PUID: 1000
            PGID: 1000
            CSRF_TRUSTED_ORIGINS: https://babybuddy.themainfreak.com

          resources:
            requests:
              cpu: 15m
            limits:
              memory: 256Mi
          probes:
            liveness:
              enabled: true
            readiness:
              enabled: true
            startup:
              enabled: true
              spec:
                failureThreshold: 30
                periodSeconds: 5

  service:
    babybuddy:
      controller: babybuddy
      ports:
        http:
          port: 8000

  ingress:
    babybuddy:
      className: nginx
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
      hosts:
        - host: &host babybuddy.themainfreak.com
          paths:
            - path: /
              service:
                identifier: babybuddy
                port: http
      tls:
        - hosts:
            - *host
          secretName: babybuddy-tls-certificate

  persistence:
    data:
      enabled: true
      existingClaim: babybuddy
      globalMounts:
        - path: /config


